@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Nueva paleta convertida a HSL */
    --primary-blue: 215 100% 34%;         /* rgb(0 74 173) */
    --primary-yellow: 45 100% 60%;        /* rgb(255 215 52) */
    
    /* Sistema de colores completo */
    --background: 0 0% 100%;
    --foreground: 215 100% 15%;
    --card: 0 0% 100%;
    --card-foreground: 215 100% 15%;
    --popover: 0 0% 100%;
    --popover-foreground: 215 100% 15%;
    --primary: var(--primary-blue);
    --primary-foreground: 0 0% 100%;
    --secondary: var(--primary-yellow);
    --secondary-foreground: 215 100% 15%;
    --muted: 45 100% 95%;
    --muted-foreground: 215 30% 45%;
    --accent: 215 100% 97%;
    --accent-foreground: var(--primary-blue);
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 215 30% 90%;
    --input: 215 30% 90%;
    --ring: var(--primary-blue);
    --radius: 0.75rem;

    /* Colores para gráficos */
    --chart-1: var(--primary-blue);
    --chart-2: var(--primary-yellow);
    --chart-3: 202 90% 54%;
    --chart-4: 45 100% 80%;
    --chart-5: 215 100% 70%;
  }

  .dark {
    --background: 215 100% 7%;
    --foreground: 45 100% 92%;
    --card: 215 100% 10%;
    --card-foreground: 45 100% 92%;
    --popover: 215 100% 10%;
    --popover-foreground: 45 100% 92%;
    --primary: var(--primary-yellow);
    --primary-foreground: 215 100% 15%;
    --secondary: var(--primary-blue);
    --secondary-foreground: 45 100% 92%;
    --muted: 215 50% 20%;
    --muted-foreground: 215 30% 70%;
    --accent: 215 100% 20%;
    --accent-foreground: var(--primary-yellow);
    --destructive: 0 62% 30%;
    --destructive-foreground: 0 0% 98%;
    --border: 215 30% 25%;
    --input: 215 30% 25%;
    --ring: var(--primary-yellow);
    
    --chart-1: var(--primary-yellow);
    --chart-2: var(--primary-blue);
    --chart-3: 45 100% 70%;
    --chart-4: 215 100% 40%;
    --chart-5: 45 100% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
  }

  /* Tipografía educativa */
  h1 {
    @apply text-4xl font-bold tracking-tighter;
  }
  h2 {
    @apply text-3xl font-semibold tracking-tight;
  }
  h3 {
    @apply text-2xl font-medium tracking-normal;
  }

  /* Efectos especiales */
  .shine-effect {
    @apply relative overflow-hidden;
    &::after {
      content: '';
      @apply absolute inset-0 bg-gradient-to-r from-transparent via-[hsla(45,100%,90%,0.3)] to-transparent;
      animation: shine 3s infinite;
    }
  }

  @keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
}

@layer components {
  .edu-card {
    @apply bg-card p-6 rounded-xl border transition-all hover:shadow-lg;
  }
  
  .accent-border {
    @apply border-l-4 border-secondary;
  }
  
  .highlight-text {
    @apply relative px-1;
    &::before {
      content: '';
      @apply absolute inset-0 -z-1 bg-yellow-100/50 transform -skew-x-12;
    }
  }

  /* Estilos específicos para vista previa de documentos */
  .document-preview {
    @apply bg-card border border-border rounded-xl shadow-lg;
  }

  .document-header {
    @apply bg-gradient-to-r from-primary/5 to-secondary/5 border-b border-border p-6;
  }

  .document-content {
    @apply p-8 space-y-6;
  }

  .document-title {
    @apply text-2xl font-bold text-center text-foreground mb-4;
  }

  .document-subtitle {
    @apply text-lg text-center text-muted-foreground mb-6;
  }

  .document-meta {
    @apply text-sm text-center text-muted-foreground space-y-1;
  }

  .structure-item {
    @apply text-sm transition-colors hover:bg-muted/50 p-2 rounded cursor-pointer;
  }

  .structure-level-1 {
    @apply font-semibold text-primary;
  }

  .structure-level-2 {
    @apply font-medium text-foreground ml-4;
  }

  .structure-level-3 {
    @apply text-muted-foreground ml-8;
  }

  .citation-example {
    @apply bg-muted/30 border-l-4 border-primary p-4 rounded-r-lg;
  }

  .document-stats {
    @apply grid grid-cols-1 md:grid-cols-3 gap-4 text-center pt-6 border-t;
  }

  .stat-item {
    @apply p-3 rounded-lg;
  }

  .stat-primary {
    @apply bg-primary/5;
  }

  .stat-secondary {
    @apply bg-secondary/5;
  }

  .preview-selector {
    @apply flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer;
  }

  .preview-selector-active {
    @apply bg-primary text-primary-foreground shadow-lg;
  }

  .preview-selector-inactive {
    @apply bg-muted text-muted-foreground hover:bg-muted/80;
  }
}

@layer utilities {
  .page-transition {
    @apply transition-opacity duration-300 ease-in-out;
  }
  
  .page-enter {
    @apply opacity-0;
  }
  
  .page-enter-active {
    @apply opacity-100;
  }
  
  .page-exit {
    @apply opacity-100;
  }
  
  .page-exit-active {
    @apply opacity-0;
  }
  
  .animate-fade-in {
    animation: fadeIn 0.5s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Utilidades para vista previa de documentos */
  .text-justify {
    text-align: justify;
  }

  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted-foreground) / 0.3);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--muted-foreground) / 0.5);
  }
}

/* ===== ANIMACIONES DE SCROLL ===== */

/* Estilos base para elementos animados mejorados */
.animate-on-scroll {
  opacity: 0;
  transition-property: opacity, transform, clip-path, filter, box-shadow;
  transition-duration: 800ms;
  transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: opacity, transform, clip-path, filter;
}

/* Clase que se añade cuando el elemento es visible */
.animate-active {
  opacity: 1 !important;
  transform: translate(0, 0) scale(1) rotate(0deg) !important;
  clip-path: inset(0 0 0 0) !important;
  filter: blur(0) brightness(1) !important;
}

/* Variantes de animación mejoradas */
.fade-in {
  opacity: 0;
  transform: translateY(15px) scale(0.98);
}

.fade-up {
  opacity: 0;
  transform: translateY(60px) scale(0.95);
  filter: blur(3px);
}

.slide-right {
  opacity: 0;
  transform: translateX(-60px) rotateY(-5deg);
  filter: blur(4px);
}

.scale-in {
  opacity: 0;
  transform: scale(0.75) rotate(-2deg);
  filter: blur(6px) brightness(1.2);
}

.clip-reveal {
  opacity: 0;
  clip-path: inset(0 100% 0 0);
  transform: translateX(-30px);
}

.blur-in {
  opacity: 0;
  filter: blur(20px) brightness(1.3);
  transform: scale(1.08) rotate(1deg);
  transition-property: opacity, filter, transform;
}

.rise-up {
  opacity: 0;
  transform: translateY(80px) rotate(-1deg) scale(0.96);
  filter: blur(2px);
}

/* Nuevas animaciones avanzadas */
.elastic-in {
  opacity: 0;
  transform: scale(0.6) rotate(-8deg);
  filter: blur(8px);
}

.glow-fade {
  opacity: 0;
  transform: translateY(40px);
  filter: blur(10px) brightness(1.4);
  box-shadow: 0 0 0 rgba(255, 215, 52, 0);
}

.bounce-in {
  opacity: 0;
  transform: scale(0.3) translateY(100px);
  filter: blur(5px);
}

.spiral-in {
  opacity: 0;
  transform: scale(0.5) rotate(180deg) translateY(50px);
  filter: blur(8px);
}

.float-up {
  opacity: 0;
  transform: translateY(30px) scale(0.98);
  filter: blur(2px);
}


/* Clases de retardo */
.delay-0 { transition-delay: 0ms; }
.delay-100 { transition-delay: 100ms; }
.delay-200 { transition-delay: 200ms; }
.delay-300 { transition-delay: 300ms; }
.delay-400 { transition-delay: 400ms; }
.delay-500 { transition-delay: 500ms; }
.delay-600 { transition-delay: 600ms; }
.delay-800 { transition-delay: 800ms; }
.delay-1000 { transition-delay: 1000ms; }

/* ===== TARJETAS AVANZADAS CON EFECTOS ===== */

.feature-grid {
  --card-background-color: rgba(255, 255, 255, 0.02);
  --card-border-color: rgba(255, 255, 255, 0.1);
  --card-box-shadow-1: rgba(0, 0, 0, 0.05);
  --card-box-shadow-1-y: 3px;
  --card-box-shadow-1-blur: 6px;
  --card-box-shadow-2: rgba(0, 0, 0, 0.1);
  --card-box-shadow-2-y: 8px;
  --card-box-shadow-2-blur: 15px;
  --card-label-color: hsl(var(--foreground));
  --card-icon-color: hsl(var(--primary));
  --card-icon-background-color: hsl(var(--primary) / 0.1);
  --card-icon-border-color: hsl(var(--primary) / 0.2);
  --card-shine-opacity: 0.15;
  --card-shine-gradient: conic-gradient(from 205deg at 50% 50%, rgba(0, 74, 173, 0) 0deg, hsl(var(--primary)) 25deg, rgba(0, 74, 173, 0.18) 295deg, rgba(0, 74, 173, 0) 360deg);
  --card-line-color: hsl(var(--border));
  --card-tile-color: hsl(var(--primary) / 0.08);

  --card-hover-border-color: hsl(var(--primary) / 0.3);
  --card-hover-box-shadow-1: rgba(0, 0, 0, 0.08);
  --card-hover-box-shadow-1-y: 5px;
  --card-hover-box-shadow-1-blur: 10px;
  --card-hover-box-shadow-2: rgba(0, 0, 0, 0.2);
  --card-hover-box-shadow-2-y: 15px;
  --card-hover-box-shadow-2-blur: 25px;
  --card-hover-icon-color: hsl(var(--secondary));
  --card-hover-icon-background-color: hsl(var(--secondary) / 0.15);
  --card-hover-icon-border-color: hsl(var(--secondary) / 0.3);
}

.feature-card {
  background-color: hsl(var(--card));
  box-shadow: 0px var(--card-box-shadow-1-y) var(--card-box-shadow-1-blur) var(--card-box-shadow-1), 
              0px var(--card-box-shadow-2-y) var(--card-box-shadow-2-blur) var(--card-box-shadow-2), 
              0 0 0 1px var(--card-border-color);
  padding: 56px 16px 16px 16px;
  border-radius: 15px;
  cursor: pointer;
  position: relative;
  transition: box-shadow 0.25s;
  min-height: 220px;
}

.feature-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 15px;
  background-color: var(--card-background-color);
}

.feature-card .icon {
  z-index: 2;
  position: relative;
  display: table;
  padding: 8px;
  margin: 0 auto 12px auto;
}

.feature-card .icon::after {
  content: '';
  position: absolute;
  inset: 4.5px;
  border-radius: 50%;
  background-color: var(--card-icon-background-color);
  border: 1px solid var(--card-icon-border-color);
  backdrop-filter: blur(2px);
  transition: background-color 0.25s, border-color 0.25s;
}

.feature-card .icon svg {
  position: relative;
  z-index: 1;
  display: block;
  width: 24px;
  height: 24px;
  transform: translateZ(0);
  color: var(--card-icon-color);
  transition: color 0.25s;
}

.feature-card h4 {
  z-index: 2;
  position: relative;
  margin: 12px 0 4px 0;
  font-family: inherit;
  font-weight: 600;
  font-size: 14px;
  line-height: 2;
  color: var(--card-label-color);
  text-align: center;
}

.feature-card p {
  z-index: 2;
  position: relative;
  margin: 0;
  font-size: 13px;
  line-height: 1.7;
  color: hsl(var(--muted-foreground));
  text-align: center;
}

.feature-card .shine {
  border-radius: inherit;
  position: absolute;
  inset: 0;
  z-index: 1;
  overflow: hidden;
  opacity: 0;
  transition: opacity 0.5s;
}

.feature-card .shine:before {
  content: '';
  width: 150%;
  padding-bottom: 150%;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  bottom: 55%;
  filter: blur(35px);
  opacity: var(--card-shine-opacity);
  transform: translateX(-50%);
  background-image: var(--card-shine-gradient);
}

.feature-card .background {
  border-radius: inherit;
  position: absolute;
  inset: 0;
  overflow: hidden;
  -webkit-mask-image: radial-gradient(circle at 60% 5%, black 0%, black 15%, transparent 60%);
  mask-image: radial-gradient(circle at 60% 5%, black 0%, black 15%, transparent 60%);
}

.feature-card .background .tiles {
  opacity: 0;
  transition: opacity 0.25s;
}

.feature-card .background .tiles .tile {
  position: absolute;
  background-color: var(--card-tile-color);
  animation-duration: 8s;
  animation-iteration-count: infinite;
  opacity: 0;
}

.feature-card .background .tiles .tile.tile-4,
.feature-card .background .tiles .tile.tile-6,
.feature-card .background .tiles .tile.tile-10 {
  animation-delay: -2s;
}

.feature-card .background .tiles .tile.tile-3,
.feature-card .background .tiles .tile.tile-5,
.feature-card .background .tiles .tile.tile-8 {
  animation-delay: -4s;
}

.feature-card .background .tiles .tile.tile-2,
.feature-card .background .tiles .tile.tile-9 {
  animation-delay: -6s;
}

.feature-card .background .tiles .tile.tile-1 {
  top: 0;
  left: 0;
  height: 10%;
  width: 22.5%;
}

.feature-card .background .tiles .tile.tile-2 {
  top: 0;
  left: 22.5%;
  height: 10%;
  width: 27.5%;
}

.feature-card .background .tiles .tile.tile-3 {
  top: 0;
  left: 50%;
  height: 10%;
  width: 27.5%;
}

.feature-card .background .tiles .tile.tile-4 {
  top: 0;
  left: 77.5%;
  height: 10%;
  width: 22.5%;
}

.feature-card .background .tiles .tile.tile-5 {
  top: 10%;
  left: 0;
  height: 22.5%;
  width: 22.5%;
}

.feature-card .background .tiles .tile.tile-6 {
  top: 10%;
  left: 22.5%;
  height: 22.5%;
  width: 27.5%;
}

.feature-card .background .tiles .tile.tile-7 {
  top: 10%;
  left: 50%;
  height: 22.5%;
  width: 27.5%;
}

.feature-card .background .tiles .tile.tile-8 {
  top: 10%;
  left: 77.5%;
  height: 22.5%;
  width: 22.5%;
}

.feature-card .background .tiles .tile.tile-9 {
  top: 32.5%;
  left: 50%;
  height: 22.5%;
  width: 27.5%;
}

.feature-card .background .tiles .tile.tile-10 {
  top: 32.5%;
  left: 77.5%;
  height: 22.5%;
  width: 22.5%;
}

@keyframes tile {
  0%, 12.5%, 100% {
    opacity: 1;
  }
  25%, 82.5% {
    opacity: 0;
  }
}

.feature-card .background .line {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.35s;
}

.feature-card .background .line:before,
.feature-card .background .line:after {
  content: '';
  position: absolute;
  background-color: var(--card-line-color);
  transition: transform 0.35s;
}

.feature-card .background .line:before {
  left: 0;
  right: 0;
  height: 1px;
  transform-origin: 0 50%;
  transform: scaleX(0);
}

.feature-card .background .line:after {
  top: 0;
  bottom: 0;
  width: 1px;
  transform-origin: 50% 0;
  transform: scaleY(0);
}

.feature-card .background .line.line-1:before {
  top: 10%;
}

.feature-card .background .line.line-1:after {
  left: 22.5%;
}

.feature-card .background .line.line-1:before,
.feature-card .background .line.line-1:after {
  transition-delay: 0.3s;
}

.feature-card .background .line.line-2:before {
  top: 32.5%;
}

.feature-card .background .line.line-2:after {
  left: 50%;
}

.feature-card .background .line.line-2:before,
.feature-card .background .line.line-2:after {
  transition-delay: 0.15s;
}

.feature-card .background .line.line-3:before {
  top: 55%;
}

.feature-card .background .line.line-3:after {
  right: 22.5%;
}

.feature-card:hover {
  box-shadow: 0px 3px 6px var(--card-hover-box-shadow-1), 
              0px var(--card-hover-box-shadow-2-y) var(--card-hover-box-shadow-2-blur) var(--card-hover-box-shadow-2), 
              0 0 0 1px var(--card-hover-border-color);
}

.feature-card:hover .icon::after {
  background-color: var(--card-hover-icon-background-color);
  border-color: var(--card-hover-icon-border-color);
}

.feature-card:hover .icon svg {
  color: var(--card-hover-icon-color);
}

.feature-card:hover .shine {
  opacity: 1;
  transition-duration: 0.5s;
  transition-delay: 0s;
}

.feature-card:hover .background .tiles {
  opacity: 1;
  transition-delay: 0.25s;
}

.feature-card:hover .background .tiles .tile {
  animation-name: tile;
}

.feature-card:hover .background .line {
  opacity: 1;
  transition-duration: 0.15s;
}

.feature-card:hover .background .line:before {
  transform: scaleX(1);
}

.feature-card:hover .background .line:after {
  transform: scaleY(1);
}

.feature-card:hover .background .line.line-1:before,
.feature-card:hover .background .line.line-1:after {
  transition-delay: 0s;
}

.feature-card:hover .background .line.line-2:before,
.feature-card:hover .background .line.line-2:after {
  transition-delay: 0.15s;
}

.feature-card:hover .background .line.line-3:before,
.feature-card:hover .background .line.line-3:after {
  transition-delay: 0.3s;
}

/* Soporte para navegadores modernos con animation-timeline */
@supports (animation-timeline: scroll()) {
  .animate-on-scroll {
    animation-duration: 600ms;
    animation-fill-mode: both;
    animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
    animation-timeline: view();
    animation-range: entry 0% cover 30%;
  }
  
  .fade-in { animation-name: fadeIn; }
  .fade-up { animation-name: fadeUp; }
  .slide-right { animation-name: slideRight; }
  .scale-in { animation-name: scaleIn; }
  .clip-reveal { animation-name: clipReveal; }
  .blur-in { animation-name: blurIn; }
  .rise-up { animation-name: riseUp; }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(80px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideRight {
    from {
      opacity: 0;
      transform: translateX(-80px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.7);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  @keyframes clipReveal {
    from {
      opacity: 0;
      clip-path: inset(100% 100% 0 0);
    }
    to {
      opacity: 1;
      clip-path: inset(0 0 0 0);
    }
  }
  
  @keyframes blurIn {
    from {
      opacity: 0;
      filter: blur(15px);
      transform: scale(1.1);
    }
    to {
      opacity: 1;
      filter: blur(0);
      transform: scale(1);
    }
  }
  
  @keyframes riseUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* Fallback para JS deshabilitado */
.no-js .animate-on-scroll {
  opacity: 1 !important;
  transform: none !important;
  clip-path: none !important;
  filter: none !important;
}

/* Corrección específica para sección CTA */
.cta-section {
  opacity: 1 !important;
  transform: none !important;
  clip-path: inset(0 0 0 0) !important;
  max-width: 100% !important;
  overflow: visible !important;
}

.cta-container {
  width: 100% !important;
  transform: none !important;
  opacity: 1 !important;
}

/* ===== ESTILOS PARA TEMA ===== */

/* Estilos para el botón de tema */
.theme-toggle-icon {
  color: var(--foreground) !important;
}

button[aria-label="Cambiar tema"] {
  background-color: rgba(255, 255, 255, 0.1) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
  color: var(--foreground) !important;
}

button[aria-label="Cambiar tema"]:hover {
  background-color: rgba(255, 255, 255, 0.2) !important;
}

/* Tema oscuro */
.dark {
  color-scheme: dark;
}

.dark body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}

.dark header {
  background-color: hsl(var(--background)) !important;
  border-color: hsl(var(--border)) !important;
}

.dark nav a {
  color: hsl(var(--muted-foreground));
}

.dark nav a:hover,
.dark nav a:focus {
  color: hsl(var(--foreground));
}

.dark .bg-slate-50 {
  background-color: hsl(var(--background));
}

.dark .moon-icon {
  color: hsl(var(--foreground));
}

.light .sun-icon {
  color: hsl(var(--foreground));
}

.dark .bg-white {
  background-color: hsl(var(--card));
}

.dark .text-slate-900 {
  color: hsl(var(--card-foreground));
}

.dark .text-slate-600 {
  color: hsl(var(--muted-foreground));
}

/* Transiciones de tema */
*, ::before, ::after {
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

/* Clase para encabezados con fondo vidrio */
.header-glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

/* ===== CORRECCIONES PARA OVERFLOW Y SCROLLBAR ===== */

/* Prevenir overflow horizontal en toda la aplicación */
html, body {
  max-width: 100vw;
  overflow-x: hidden;
}

/* Estilos para scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: hsl(var(--muted-foreground) / 0.3);
  border-radius: 20px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--muted-foreground) / 0.5);
}

/* Corrección específica para evitar saltos en transiciones de página */
.page-container {
  width: 100%;
  position: relative;
  overflow-x: hidden;
}

/* Fix para el header en modo oscuro */
.dark .header-bg {
  background-color: hsl(var(--background) / 0.95) !important;
}

/* Corrección para evitar el desplazamiento del header al cambiar de página */
@media (min-width: 768px) {
  .header-width-fix {
    margin-right: calc(100vw - 100%);
  }
}

/* Ajuste para contenedores animados para evitar desbordamiento */
.animate-on-scroll {
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform, opacity;
}

/* Asegurarse de que todos los contenedores respeten el ancho total */
.full-width-container {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
}

/* ===== DYNAMIC PARTICLE BACKGROUND (INSPIRADO EN DOTS) ===== */

.rainbow-background-container {
  position: relative;
  min-height: 100vh;
  width: 100%;
  overflow: hidden;
  font-size: 2px;
  color: transparent;
}

/* Fondo base adaptativo */
.light-rainbow {
  background: 
    radial-gradient(circle at 25% 25%, hsl(var(--primary-blue) / 0.25) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, hsl(var(--primary-yellow) / 0.2) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(var(--chart-3) / 0.15) 0%, transparent 50%),
    radial-gradient(circle at 10% 80%, hsl(215 60% 30% / 0.1) 0%, transparent 40%),
    radial-gradient(circle at 90% 20%, hsl(202 90% 54% / 0.12) 0%, transparent 40%),
    hsl(var(--background));
}

.dark-rainbow {
  background: 
    radial-gradient(circle at 25% 25%, hsl(var(--primary-yellow) / 0.18) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, hsl(var(--primary-blue) / 0.22) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, hsl(var(--chart-3) / 0.12) 0%, transparent 50%),
    radial-gradient(circle at 10% 80%, hsl(45 100% 60% / 0.08) 0%, transparent 40%),
    radial-gradient(circle at 90% 20%, hsl(215 100% 34% / 0.15) 0%, transparent 40%),
    hsl(var(--background));
}

/* Capas de partículas con tu paleta */
.rainbow-background-container::before,
.rainbow-background-container::after {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 3em;
  height: 3em;
  content: '.';
  mix-blend-mode: screen;
  font-size: 26px;
  animation: moveParticles ease-in-out infinite alternate;
}

/* Primera capa de partículas */
.light-rainbow::before {
  text-shadow: 
    0.2em 0.8em 8px hsla(215, 100%, 34%, 0.8),
    -0.8em 0.3em 10px hsla(45, 100%, 50%, 0.7),
    1.2em -0.5em 6px hsla(202, 90%, 54%, 0.9),
    -0.3em -1.1em 9px hsla(215, 60%, 30%, 0.6),
    0.9em 1.3em 8px hsla(215, 100%, 34%, 0.8),
    -1.5em -0.2em 12px hsla(45, 100%, 50%, 0.5),
    0.6em -1.8em 6px hsla(202, 90%, 54%, 0.9),
    -0.9em 0.7em 9px hsla(215, 60%, 30%, 0.6),
    1.8em 0.1em 8px hsla(215, 100%, 34%, 0.7),
    -0.1em 1.6em 10px hsla(45, 100%, 50%, 0.8),
    1.1em -1.2em 6px hsla(202, 90%, 54%, 0.9),
    -1.7em -0.9em 9px hsla(215, 60%, 30%, 0.5),
    0.4em 2.1em 8px hsla(215, 100%, 34%, 0.8),
    -1.3em 0.6em 12px hsla(45, 100%, 50%, 0.7),
    2.2em -0.4em 6px hsla(202, 90%, 54%, 1.0),
    -0.6em -2.5em 9px hsla(215, 60%, 30%, 0.6),
    1.5em 1.8em 8px hsla(215, 100%, 34%, 0.7),
    -2.1em -0.7em 10px hsla(45, 100%, 50%, 0.8),
    0.8em -2.2em 6px hsla(202, 90%, 54%, 0.9),
    -1.4em 1.9em 9px hsla(215, 60%, 30%, 0.5);
  animation: moveParticles 55s -20s ease-in-out infinite alternate;
}

.light-rainbow::after {
  text-shadow: 
    -0.5em 1.2em 9px hsla(45, 100%, 50%, 0.8),
    1.3em -0.8em 8px hsla(215, 100%, 34%, 0.9),
    -0.9em -1.5em 10px hsla(202, 90%, 54%, 0.7),
    2.1em 0.4em 6px hsla(215, 60%, 30%, 0.9),
    -1.7em 0.9em 9px hsla(45, 100%, 50%, 0.7),
    0.7em 2.3em 8px hsla(215, 100%, 34%, 0.8),
    -2.4em -0.6em 10px hsla(202, 90%, 54%, 0.6),
    1.6em -1.9em 6px hsla(215, 60%, 30%, 0.9),
    -0.2em 1.7em 9px hsla(45, 100%, 50%, 0.8),
    2.5em -0.3em 8px hsla(215, 100%, 34%, 0.7),
    -1.1em -2.1em 10px hsla(202, 90%, 54%, 0.9),
    0.3em 2.8em 6px hsla(215, 60%, 30%, 0.5),
    -2.7em 0.8em 9px hsla(45, 100%, 50%, 0.8),
    1.9em -2.4em 8px hsla(215, 100%, 34%, 1.0),
    -0.4em 3.2em 10px hsla(202, 90%, 54%, 0.7),
    2.9em -1.1em 6px hsla(215, 60%, 30%, 0.9),
    -1.8em -2.7em 9px hsla(45, 100%, 50%, 0.6),
    0.9em 3.5em 8px hsla(215, 100%, 34%, 0.8),
    -3.1em 1.4em 10px hsla(202, 90%, 54%, 0.7),
    2.2em -3.3em 6px hsla(215, 60%, 30%, 0.9);
  animation: moveParticles 52s -35s ease-in-out infinite alternate;
}

/* Modo oscuro - partículas más vibrantes */
.dark-rainbow::before {
  text-shadow: 
    0.2em 0.8em 4px hsla(45, 100%, 60%, 0.5),
    -0.8em 0.3em 6px hsla(215, 100%, 34%, 0.4),
    1.2em -0.5em 3px hsla(45, 100%, 70%, 0.6),
    -0.3em -1.1em 5px hsla(215, 30%, 70%, 0.4),
    0.9em 1.3em 4px hsla(45, 100%, 60%, 0.5),
    -1.5em -0.2em 7px hsla(215, 100%, 34%, 0.3),
    0.6em -1.8em 3px hsla(45, 100%, 70%, 0.7),
    -0.9em 0.7em 5px hsla(215, 30%, 70%, 0.4),
    1.8em 0.1em 4px hsla(45, 100%, 60%, 0.4),
    -0.1em 1.6em 6px hsla(215, 100%, 34%, 0.5),
    1.1em -1.2em 3px hsla(45, 100%, 70%, 0.6),
    -1.7em -0.9em 5px hsla(215, 30%, 70%, 0.3),
    0.4em 2.1em 4px hsla(45, 100%, 60%, 0.5),
    -1.3em 0.6em 7px hsla(215, 100%, 34%, 0.4),
    2.2em -0.4em 3px hsla(45, 100%, 70%, 0.7),
    -0.6em -2.5em 5px hsla(215, 30%, 70%, 0.4),
    1.5em 1.8em 4px hsla(45, 100%, 60%, 0.4),
    -2.1em -0.7em 6px hsla(215, 100%, 34%, 0.5),
    0.8em -2.2em 3px hsla(45, 100%, 70%, 0.6),
    -1.4em 1.9em 5px hsla(215, 30%, 70%, 0.3);
  animation: moveParticles 58s -25s ease-in-out infinite alternate;
}

.dark-rainbow::after {
  text-shadow: 
    -0.5em 1.2em 5px hsla(215, 100%, 34%, 0.5),
    1.3em -0.8em 4px hsla(45, 100%, 60%, 0.6),
    -0.9em -1.5em 6px hsla(45, 100%, 70%, 0.4),
    2.1em 0.4em 3px hsla(215, 30%, 70%, 0.7),
    -1.7em 0.9em 5px hsla(215, 100%, 34%, 0.4),
    0.7em 2.3em 4px hsla(45, 100%, 60%, 0.5),
    -2.4em -0.6em 6px hsla(45, 100%, 70%, 0.3),
    1.6em -1.9em 3px hsla(215, 30%, 70%, 0.6),
    -0.2em 1.7em 5px hsla(215, 100%, 34%, 0.5),
    2.5em -0.3em 4px hsla(45, 100%, 60%, 0.4),
    -1.1em -2.1em 6px hsla(45, 100%, 70%, 0.6),
    0.3em 2.8em 3px hsla(215, 30%, 70%, 0.3),
    -2.7em 0.8em 5px hsla(215, 100%, 34%, 0.5),
    1.9em -2.4em 4px hsla(45, 100%, 60%, 0.7),
    -0.4em 3.2em 6px hsla(45, 100%, 70%, 0.4),
    2.9em -1.1em 3px hsla(215, 30%, 70%, 0.6),
    -1.8em -2.7em 5px hsla(215, 100%, 34%, 0.3),
    0.9em 3.5em 4px hsla(45, 100%, 60%, 0.5),
    -3.1em 1.4em 6px hsla(45, 100%, 70%, 0.4),
    2.2em -3.3em 3px hsla(215, 30%, 70%, 0.6);
  animation: moveParticles 54s -40s ease-in-out infinite alternate;
}

/* Animación suave y constante */
@keyframes moveParticles {
  0% {
    transform: rotate(0deg) scale(8) translateX(-15px);
    filter: blur(0.5px);
  }
  25% {
    transform: rotate(90deg) scale(12) translateX(10px);
    filter: blur(1px);
  }
  50% {
    transform: rotate(180deg) scale(10) translateX(20px);
    filter: blur(0.8px);
  }
  75% {
    transform: rotate(270deg) scale(14) translateX(-5px);
    filter: blur(1.2px);
  }
  100% {
    transform: rotate(360deg) scale(11) translateX(15px);
    filter: blur(0.6px);
  }
}

/* Ajuste para que el contenido sea legible */
.rainbow-background-container > .relative {
  position: relative;
  z-index: 10;
}